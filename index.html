<!DOCTYPE html>
<html lang="en" class="no-js">

<head>
   <meta charset="UTF-8" />
   <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Animator's Combo Generator</title>
   <meta name="description"
      content="Generate random different combos for animation purposes. Originally created for Stick Figure animations. Feature suggestion or an idea for a move? Suggest it at the link on the page." />
   <meta name="keywords"
      content="combo, generator, animator, stick, figure, animation, gen, rose, ðŸŒ¹, combos, stickpage, hyuns dojo, dojo, community" />
   <meta name="author" content="GenðŸŒ¹" />
   <link rel="shortcut icon" href="./favicon.ico">
   <link rel="stylesheet" type="text/css" href="css/water.css" />
   <link rel="stylesheet" type="text/css" href="css/Toast.min.css" />
   <link rel="stylesheet" href="font-awesome/css/font-awesome.min.css">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <script src="js/clipboard.min.js"></script>
   <script src="js/Toast.min.js"></script>
   <style>
      #credits {
         position: fixed;
         bottom: 0px;
         right: 30px;
         font-size: 2rem;
      }

      /*lol*/

      .boxContainer:first-of-type {
         max-width: 100%;
         border: 2px solid var(--text-main);
         border-top: 2px solid var(--text-main);
         border-bottom: 1px solid var(--text-main);
         position: relative;
      }

      .boxContainer {
         max-width: 100%;
         border: 2px solid var(--text-main);
         border-top: 1px solid var(--text-main);
         border-bottom: 1px solid var(--text-main);
         position: relative;
      }

      .boxContainer:last-of-type {
         max-width: 100%;
         border: 2px solid var(--text-main);
         border-top: 1px solid var(--text-main);
         border-bottom: 2px solid var(--text-main);
         position: relative;
      }


      .boxLabel {
         position: absolute;
         top: -20px;
         left: 10px;
         height: 20px;
         padding-left: 10px;
         padding-right: 10px;
         max-width: 100%;
         color: var(--text-main);
         background-color: var(--background-body);
         /*border: 2px solid rgb(0, 0, 0);*/
         text-align: left;
         font-size: 23px;
         font-weight: 300;
         -webkit-touch-callout: none;
         -webkit-user-select: none;
         -khtml-user-select: none;
         -moz-user-select: none;
         -ms-user-select: none;
         user-select: none;
      }

      .boxLabel input[type="checkbox"] {
         opacity: 0;
         display: none;
      }

      .boxLabel input[type="checkbox"]+label {
         color: rgb(134, 134, 134);
         cursor: pointer;
      }

      .boxLabel input[type="checkbox"]:checked+label {
         color: #2db620;
      }

      .isUsed label .isused {
         display: inline-block;
      }

      .isUsed label .notused {
         display: none;
      }

      .notUsed label .isused {
         display: none;
      }

      /**************/

      .moveCheckBoxContainer {
         padding: 25px;
         font-weight: 500;
         -webkit-touch-callout: none;
         -webkit-user-select: none;
         -khtml-user-select: none;
         -moz-user-select: none;
         -ms-user-select: none;
         user-select: none;
      }

      .moveCheckBoxContainer input[type="checkbox"] {
         opacity: 0;
         display: none;
      }

      .moveCheckBoxContainer input[type="checkbox"]+label {
         color: rgb(134, 134, 134);
         cursor: pointer;
      }

      .moveCheckBoxContainer input[type="checkbox"]:checked+label {
         color: var(--background-color);
      }

      .moveCheckLabel {
         margin-right: 20px;
      }
   </style>

   <!--research-->
   <script async src="https://www.googletagmanager.com/gtag/js?id=G-441BD58LE0"></script>
   <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-441BD58LE0');
   </script>
   <script type="text/javascript">
      (function (c, l, a, r, i, t, y) {
         c[a] = c[a] || function () {(c[a].q = c[a].q || []).push(arguments)};
         t = l.createElement(r); t.async = 1; t.src = "https://www.clarity.ms/tag/" + i;
         y = l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t, y);
      })(window, document, "clarity", "script", "b6if37doio");
   </script>
</head>

<!-- created by Gen / GMR / Genevra Rose -->
<!-- BTW this is the oldest program known to mankind, don't expect this code to be good XD -->

<body>
   <div class="container">
      <header>
         <h1 style="text-align: center; font-weight: 300; font-size: 3rem;">ANIMATOR'S COMBO GENERATOR</h1>
      </header>
      <script>
         var comboLength = 6;
         class ComboMove {
            constructor(moveId, category, internalName, displayName, isUnique, followerMove, isFinisher = false, used = false, isEnabled = true) {
               this.moveId = moveId;
               this.category = category;
               this.internalName = internalName.length > 0 ? internalName : displayName;
               this.displayName = displayName;
               this.isUnique = isUnique;
               this.followerMove = followerMove;
               this.used = used;
               this.isFinisher = isFinisher;
               this.isEnabled = isEnabled;
            }
         }
         function getFinisher(combos) {
            let arr = Array();
            let retry = 99;

            for (var i = 0; i < combos.length; i++) {
               if (retry < 0)
                  break;
               if (combos[i].isFinisher === true) {

                  if (combos[i].category[2] == false) {
                     retry--;
                     continue;
                  }


                  // we don't need to break for finishers because we never add if disabled
                  arr.push(combos[i]);
               }
            }

            var rand = Math.floor((arr.length) * Math.random());
            return arr[rand];
         }
         // internal name, display name, enabled
         var categories = [["melee", "Basic Attacks", true], ["advanced", "Advanced Attacks", true], ["elemental", "Elemental Moves", true], ["silly", "Silly Moves", true], ["movement", "Movement", true], ["finisher", "Finisher Moves", true]];
         var combosState = new Array(
            // melee
            new ComboMove(0, categories[0], "", "Heavy Kick", false, null),
            new ComboMove(0, categories[0], "", "Light Kick", false, null),
            new ComboMove(0, categories[0], "", "Light Punch", false, null),
            new ComboMove(0, categories[0], "", "Heavy Punch", false, null),
            new ComboMove(0, categories[0], "", "Grab", true, "Close Range Hit, Throw/Distance"),
            new ComboMove(0, categories[0], "", "Elbow", false, null),
            new ComboMove(0, categories[0], "", "Knee", false, null),
            new ComboMove(0, categories[0], "", "Hip Check", false, null),

            // advanced
            new ComboMove(0, categories[1], "", "Uppercut", false, null),
            new ComboMove(0, categories[1], "", "Jab", false, null),
            new ComboMove(0, categories[1], "", "Bone Breaker", false, null),
            new ComboMove(0, categories[1], "", "Charge", false, null),
            new ComboMove(0, categories[1], "", "Backflip Kick", false, null),
            new ComboMove(0, categories[1], "", "Frontflip Kick", false, null),
            new ComboMove(0, categories[1], "", "Roundhouse Kick", false, null),
            new ComboMove(0, categories[1], "", "Karate Chop", false, null),
            new ComboMove(0, categories[1], "", "Spin Kick", false, null),
            new ComboMove(0, categories[1], "", "Drop Kick", false, null),

            // elemental
            new ComboMove(0, categories[2], "", "Laser Beam", false, null),
            new ComboMove(0, categories[2], "", "Electrocute", false, null),
            new ComboMove(0, categories[2], "", "Fire Element Attack", false, null),
            new ComboMove(0, categories[2], "", "Meteor Summon", false, null),
            new ComboMove(0, categories[2], "", "Lightning Bolt", false, null),
            new ComboMove(0, categories[2], "", "Ground Slam", false, null),
            // todo: 'not after the other move' parameter vs simply unique
            new ComboMove(0, categories[2], "", "Next Move Fire Charged", true, null),
            new ComboMove(0, categories[2], "", "Next Move Electrically Charged", true, null),


            // silly combos
            new ComboMove(0, categories[3], "", "Eye Poke", false, null),
            new ComboMove(0, categories[3], "", "Groin Kick", false, null),
            new ComboMove(0, categories[3], "", "Slap", false, null),

            // movement
            new ComboMove(0, categories[4], "", "Backflip", false, null),
            new ComboMove(0, categories[4], "", "Frontflip", false, null),
            new ComboMove(0, categories[4], "", "Slide", false, null),
            new ComboMove(0, categories[4], "", "Trip", false, null),
            new ComboMove(0, categories[4], "", "Epic Fight Stance", false, null),

            // finishers
            new ComboMove(0, categories[5], "", "Neck Snap", false, null, true),
            new ComboMove(0, categories[5], "", "Falcon Punch", false, null, true),
            new ComboMove(0, categories[5], "", "Knock Out", false, null, true),
            new ComboMove(0, categories[5], "", "Break In Half", false, null, true),
            new ComboMove(0, categories[5], "", "Back Break", false, null, true),
         );
         // i hate javascript
         var combos = JSON.parse(JSON.stringify(combosState));
         var FINISHER_MOVE_INDEX = 5;
         function GenerateCombo() {
            var combos = JSON.parse(JSON.stringify(combosState));
            combos.filter(x => {return x.category[0] != "finisher";});

            /*for (var test = 0; test < combos.length; test++) {
               console.log(combos[test].used);
            }*/

            var generatedCombo = Array();

            comboLength = document.getElementById("textInput").value;

            var combosTogether = "";
            let count = 0;
            let retry = 999;
            //let retryFinisher = 500;
            while (count < comboLength) {
               if (retry < 0) {
                  console.log("Recovered - couldn't generate combo with parameters");
                  combosTogether = "We tried and failed to generate a combo with the chosen parameters. Maybe you need to pick some moves first?";
                  break;
               }
               var rand = Math.floor((combos.length) * Math.random());

               //categories
               if (combos[rand].isEnabled === false) {
                  retry--;
                  continue;
               }
               if (combos[rand].used === true && combos[rand].isUnique === true) {
                  retry--;
                  continue;
               }

               /*
               if (combos[rand].category == "finisher") {
                  retryFinisher--;
                  continue;
               }
               */

               //categories
               if (combos[rand].category[2] == false) {
                  retry--;
                  continue;
               }




               // mark move as used
               combos[rand].used = true;

               // Add displayname to string
               let generatedMove = combos[rand].displayName;

               if (combos[rand].followerMove != null) {
                  combosTogether = combosTogether + generatedMove + ", " + combos[rand].followerMove;
               } else {
                  combosTogether = combosTogether + generatedMove;
               }

               if (count < comboLength - 1) {
                  combosTogether += ", ";
               }


               count++;
            }

            if (categories[FINISHER_MOVE_INDEX][2] == true) {
               var comboFinishers = combosState.filter(x => x.category[0] == "finisher");
               combosTogether += ", " + getFinisher(comboFinishers).displayName;
            }

            let comboToGenerate = combosTogether;
            document.getElementById("comboBox").innerHTML = comboToGenerate;

            document.getElementById("copyButtonId").disabled = false;
         }
         function copyToClipboard(text) {
            //prompt("Press CTRL + C (Or CMD + C) to copy your combo!", text);

            // there's a hidden close button here
            new Toast({
               message: 'Copied combo to clipboard. Press CTRL + V (or CMD + V) to paste!',
               type: 'success'
            });
         }


         function updateTextInput(val) {
            document.getElementById('textInput').value = val;

            GenerateCombo();
         }

      </script>
      <center>
         <div style="min-height:100px; font-weight: 600;" id="comboBox">Your combo will generate here.</div>
         <style scoped>
            .generateButton {
               background: #26921d;
            }

            .copyButton {
               background: #34c9ee;
            }
         </style>

         <div style="display: flex; margin: auto; align-items: center; justify-content: center; text-align: center;">
            <input type="range" name="rangeInput" min="3" max="30" value="8" onchange="updateTextInput(this.value);">
            <input type="text" id="textInput" value="6"
               style="max-width: 25px; max-height: 15px; margin-left: 0.2rem; margin-top: 5px;">
         </div>
         <button id="generateButton" onClick="GenerateCombo()"
            class="pure-button pure-button-primary generateButton">GENERATE A
            COMBO</button><button disabled="disabled" class="copyButton" id="copyButtonId" data-id="@item.Type"
            data-clipboard-action="copy" data-clipboard-target="div#comboBox"
            onclick="copyToClipboard(document.getElementById('comboBox').innerHTML)" class="pure-button copyButton">COPY
            COMBO</button>
         <br>
         <hr>
         <p style="margin-top:20px; margin-bottom: 30px; font-style:italic">Clicking on a category name or move will
            enable/disable it
            from
            the pool of possible moves.</p>
         <div id="moveContainer">

         </div>

      </center>
   </div>
   <br />

   </div>
   <p style="text-align: center;">Hey, listen! Have an idea for a move? <br /><a style="font-size:1.1rem;"
         href="https://forms.gle/gB9RayfFNtqENAzE8" target="_blank">Click here to visit a form to submit it
         (https://forms.gle/gB9RayfFNtqENAzE8)</a></p>
   <div class="patchNotes">
      <h3>Patch Notes - 3.27.2022</h3>
      <p>
      <ul>
         <li>
            Updated categories and moves
         </li>
         <li>
            Enabled all moves by default based on user usage
         </li>
      </ul>
      </p>
   </div>
   <p id="credits"><a href="https://rose.dev/" target="_blank">ðŸŒ¹</a></p>
   <script>
      new ClipboardJS('.copyButton', {
         target: function (trigger) {
            return document.getElementById("comboBox");
         }
      });

      var moveContainer = null;
      // used to refresh ui state at start and run check() function
      var loadStart = false;

      // UI function should probably break this up
      function check(category) {
         if (!loadStart) {
            for (var i = 0; i < categories.length; i++) {
               var option = categories[i][2];
               if (option) {
                  document.getElementById(categories[i][0]).parentElement.classList.add("isUsed");
                  document.getElementById(categories[i][0]).parentElement.classList.remove("notUsed");
               }
               else {
                  document.getElementById(categories[i][0]).parentElement.classList.remove("isUsed");
                  document.getElementById(categories[i][0]).parentElement.classList.add("notUsed");
               }
            }

            loadStart = true;
            console.log("Refreshed ui");
            return;
         }


         for (var i = 0; i < categories.length; i++) {
            if (category == categories[i][0]) {
               var prevOption = categories[i][2];
               categories[i][2] = !prevOption;

               // we're changing it to opposite so we would add it being used
               if (!prevOption) {
                  document.getElementById(category).parentElement.classList.add("isUsed");
                  document.getElementById(category).parentElement.classList.remove("notUsed");
               }
               else {
                  document.getElementById(category).parentElement.classList.remove("isUsed");
                  document.getElementById(category).parentElement.classList.add("notUsed");
               }


               break;
            }
         }

         GenerateCombo();
      }

      function changeMove(moveName, moveCategory) {
         for (var i = 0; i < combosState.length; i++) {
            if (moveName == combosState[i].displayName.toLowerCase()) {
               let state = combosState[i].isEnabled;
               combosState[i].isEnabled = !state;
               break;
            }
         }

         // regenerate if category enabled
         if (categories.filter(x => x[0] == moveCategory)[0][2])
            GenerateCombo();
      }

      (function LetsGo() {
         moveContainer = document.getElementById("moveContainer");

         for (var i = 0; i < categories.length; i++) {
            let box = document.createElement("div");
            box.classList += "boxContainer";

            let label = document.createElement("div");
            label.classList += "boxLabel";
            label.innerHTML = `<input id = '` + categories[i][0].toLowerCase() + `' ` + (categories[i][2] == true ? `checked = ""` : ``) + ` onclick = "check('` + categories[i][0] + `')" type = "checkbox" />`
               +
               `<label id = 'label_` + categories[i][0].toLowerCase() + `' ` + ` for=` + categories[i][0].toLowerCase() + `>` + categories[i][1] + ` <span class="fa fa-check isused"></span><span class="fa fa-times notused"></span></label>`;

            let moveCheckBoxContainer = document.createElement("div");
            moveCheckBoxContainer.classList += "moveCheckBoxContainer";

            box.appendChild(label);
            box.appendChild(moveCheckBoxContainer);

            let moves = Array();
            for (var j = 0; j < combos.length; j++) {
               if (combos[j].category[0] == categories[i][0]) {
                  moves.push(combos[j]);
               }
            }
            //Options
            for (var m = 0; m < moves.length; m++) {
               //console.log(moves[m]);
               let moveCheck = document.createElement("input");
               moveCheck.onclick = function () {changeMove(this.id, this.getAttribute("data-category"));}
               moveCheck.classList += "moveCheckBox";
               moveCheck.type = "checkbox";
               moveCheck.id = moves[m].displayName.toLowerCase();
               moveCheck.setAttribute("data-category", categories[i][0]);
               if (moves[m].isEnabled) {
                  moveCheck.setAttribute("checked", "");
               }

               let moveCheckLabel = document.createElement("label");
               moveCheckLabel.innerHTML = moves[m].displayName;
               moveCheckLabel.setAttribute("for", moves[m].displayName.toLowerCase());
               moveCheckLabel.id = 'label_' + moves[m].displayName.toLowerCase();
               moveCheckLabel.classList += "moveCheckLabel";
               //moveCheckLabel.style = "margin-right: 20px;";

               moveCheckBoxContainer.appendChild(moveCheck);
               moveCheckBoxContainer.appendChild(moveCheckLabel);
            }


            moveContainer.appendChild(box);
         }

         // refresh ui at start
         check("start_ui");
      })();
   </script>
</body>

</html>